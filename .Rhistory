clean_names()
glimpse(median_income)
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
glimpse(median_income)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
as.numeric((median_income$x2020_data))
glimpse(median_income)
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
as.numeric((median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
as.numeric(unlist(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- as.numeric(unlist(median_income$x2020_data))
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
unlist(median_income)
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
unlist(median_income$x2020_data)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income$x2020_data ==as.numeric(unlist), x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income$x2020_data ==as.numeric(unlist), x2020_data)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- mutate(median_income$x2020_data ==as.numeric(unlist), x2020_data)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- mutate(median_income$x2020_data ==as.numeric(x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- mutate(median_income$x2020_data ==as.numeric(median_income$x2020_data))
glimpse(median_income)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- mutate(median_income$x2020_data = as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- mutate(numeric == as.numeric(median_income$x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- gsub(",", "", median_income)
as.numeric(median_income)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
median_income <- gsub(",", "", median_income)
median_income <- as.numeric(median_income)
median_income <- median_income %>%
as.data.frame() %>%
clean_names()
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data = as.numeric(x2020_data))
median_income <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data = as.numeric(unlist(x2020_data)))
public_transportation <- read_excel("public_transportation/public_transportation.xlsx")
drive_to_work <- read_excel("public_transportation/drive_to_work.xlsx")
no_car <- read_excel("public_transportation/no_car_access.xlsx")
median_income <- read_excel("public_transportation/median_income.xlsx")
pop_white <- read_excel("public_transportation/population_white.xlsx")
pop_black <- read_excel("population_black/population_black.xlsx")
pop_hisp <- read_excel("population_black/population_hispanic.xlsx")
pop_asian <- read_excel("population_black/population_asian.xlsx")
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(median_income$x2020_data = as.numeric(unlist(median_income$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(median_income$x2020_data == as.numeric(unlist(median_income$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(median_income1$x2020_data == as.numeric(unlist(median_income1$x2020_data)))
median_income1 <- median_income %>%
clean_names()
median_income1 <- mutate(median_income1$x2020_data == as.numeric(unlist(median_income1$x2020_data)))
median_income1 <- median_income %>%
clean_names()
median_income1 <- mutate(median_income1$x2020_data == as.numeric((median_income1$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(median_income1$x2020_data == as.numeric((median_income1$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(x2020_data == as.numeric((median_income1$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
View(median_income1)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- mutate(median_income1x2020_data == as.numeric((median_income1$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income1x2020_data == as.numeric((median_income1$x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income1x2020_data == as.numeric(x2020_data))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(median_income1$x2020_data == as.numeric(x2020_data))
glimpse(median_income1)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(x2020_data))
median_income1 <- median_income
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(x2020_data))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(unlist(x2020_data)))
glimpse(median_income1)
median_income1 <- median_income
glimpse(median_income)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(x2020_data))
glimpse(median_income1)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(unlist(x2020_data)))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(x2020_data))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names() %>%
mutate(x2020_data == as.numeric(unlist(x2020_data)))
glimpse(median_income1)
View(median_income1)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
# scatterplots for the two graphs
ggplot(transportation_income_join, aes(y=public_transport, x=median_income)) +
geom_point() +
theme(axis.text.x = element_text(angle = 90)) +
labs(
title="As public transportation use declines, salaries increase",
subtitle = "In Baltimore City neighborhoods, neighborhoods with high public transportation use make an median
income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
options(scipen=999)
# inner join neighborhoods that use public transportation the most with income data
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
# scatterplots for the two graphs
ggplot(transportation_income_join, aes(y=public_transport, x=median_income)) +
geom_point() +
theme(axis.text.x = element_text(angle = 90)) +
labs(
title="As public transportation use declines, salaries increase",
subtitle = "In Baltimore City neighborhoods, neighborhoods with high public transportation use make an median
income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
# inner join neighborhoods that use public transportation the most with income data
options(scipen=999)
median_income1 <- median_income %>%
as.data.frame() %>%
clean_names()
median_income1$x2020_data <- as.numeric(gsub(",","",median_income1$x2020_data))
public_transportation <- public_transportation %>%
arrange(desc("2020 Data"))
transportation_income_join <- public_transportation %>%
clean_names() %>%
inner_join(median_income1, by="community") %>%
rename(median_income = x2020_data.y) %>%
rename(public_transport = x2020_data.x) %>%
arrange(desc(public_transport))
# scatterplots for the two graphs
ggplot(transportation_income_join, aes(y=public_transport, x=median_income)) +
geom_point() +
theme(axis.text.x = element_text(angle = 90)) +
labs(
title="As public transportation use declines, salaries increase",
subtitle = "In Baltimore City neighborhoods, neighborhoods with high public transportation use make an median
income of $40,000 while the median income of neighborhoods with low public
transportation use is about $110,000.",
x = "Median income",
y = "Percent who use public transportation to get to work",
caption = "Source: BNIA  By: Victoria Stavish")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(janitor)
library(readxl)
library(writexl)
library(ggplot2)
cafe_2020 <- read_excel("cafe_2020.xlsx")
cafe_2021 <- read_excel("cafe_2021.xlsx")
cafe_2022 <- read_excel("cafe_2022.xlsx")
cafe_2020 <- cafe_2020 %>%
clean_names() %>%
rename(cafe = "calendar_year_2020") %>%
mutate(cafe_total = rowSums(across(where(is.numeric)),
na.rm = TRUE)) %>%
arrange(desc(cafe_total))
cafe_2021 <- cafe_2021 %>%
clean_names() %>%
rename(cafe = "calendar_year_2021") %>%
mutate(cafe_total = rowSums(across(where(is.numeric)),
na.rm = TRUE)) %>%
arrange(desc(cafe_total))
cafe_2022 <- cafe_2022 %>%
clean_names() %>%
rename(cafe = "calendar_year_2022") %>%
mutate(cafe_total = rowSums(across(where(is.numeric)),
na.rm = TRUE)) %>%
arrange(desc(cafe_total))
closed_cafes_2021 <- anti_join(cafe_2020, cafe_2021, by="cafe") %>%
as.data.frame()
closed_cafes_2022 <- anti_join(cafe_2021, cafe_2022, by="cafe") %>%
as.data.frame()
cafe_2020_bar <- cafe_2020 %>%
pivot_longer(
cols = ends_with("2020"),
names_to = "month",
values_to = "income"
) %>%
drop_na() %>%
arrange(desc(income))
cafe_2021_bar <- cafe_2021 %>%
pivot_longer(
cols = ends_with("2021"),
names_to = "month",
values_to = "income"
) %>%
arrange(desc(income))
cafe_2022_bar <- cafe_2022 %>%
pivot_longer(
cols = ends_with("2022"),
names_to = "month",
values_to = "income"
) %>%
arrange(desc(income))
year_sum20 <- cafe_2020 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_20 <- data.frame (first_column  = c("811620.23")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum21 <- cafe_2021 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_21 <- data.frame (first_column  = c("1630942.70")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum22 <- cafe_2022 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_22 <- data.frame (first_column  = c("2656101.62")
) %>%
mutate(first_column = as.numeric(first_column))
yearly_sums <- cbind(sum_20, sum_21, sum_22) %>%
rename("2020" = 1, "2021" = 2, "2022" = 3) %>%
pivot_longer(
cols = starts_with("20"),
names_to = "year",
values_to = "income"
)
ggplot(yearly_sums) +
geom_bar(aes(x = year, weight=income)) +
ggtitle("total revenues acrosss all cafes, by year")
cafe_2020_sums <- cafe_2020_bar %>%
as.data.frame() %>%
clean_names() %>%
pivot_wider(
names_from = cafe,
values_from = income
)
cafe_2021_sums <- cafe_2021_bar %>%
as.data.frame() %>%
clean_names() %>%
pivot_wider(
names_from = cafe,
values_from = income
)
cafe_2022_sums <- cafe_2022_bar %>%
as.data.frame() %>%
clean_names() %>%
pivot_wider(
names_from = cafe,
values_from = income
)
library(openxlsx)
all_sums <- list('Sheet1' = cafe_2020_sums, 'Sheet2' = cafe_2021_sums, 'Sheet3' = cafe_2022_sums)
write.xlsx(all_sums, file = 'C:/Users/Vstav/OneDrive/Documents/GitHub/dbk_datadesk/cafe/all_cafe_sums.xlsx')
cafe_monthly_2020 <- read_excel("cafe_sums_2020.xlsx")
cafe_monthly_2021 <- read_excel("cafe_sums_2021.xlsx")
cafe_monthly_2022 <- read_excel("cafe_sums_2022.xlsx")
cafe_monthly_2020 <- cafe_monthly_2020 %>%
clean_names() %>%
arrange(desc(monthly_totals))
cafe_monthly_2021 <- cafe_monthly_2021 %>%
clean_names() %>%
arrange(desc(monthly_totals))
cafe_monthly_2022 <- cafe_monthly_2022 %>%
clean_names() %>%
arrange(desc(monthly_totals))
cafe_2020_plot <- cafe_2020 %>%
arrange(desc(cafe_total))
ggplot(cafe_2020_plot) +
geom_bar(aes(x = reorder(cafe, cafe_total), weight=cafe_total)) +
ggtitle("cafe revenues 2020")+
coord_flip()
cafe_2021_plot <- cafe_2021 %>%
arrange(desc(cafe_total))
ggplot(cafe_2021_plot) +
geom_bar(aes(x = reorder(cafe, cafe_total), weight=cafe_total)) +
ggtitle("cafe revenues 2021")+
coord_flip()
cafe_2022_plot <- cafe_2022 %>%
arrange(desc(cafe_total))
ggplot(cafe_2022_plot) +
geom_bar(aes(x = reorder(cafe, cafe_total), weight=cafe_total)) +
ggtitle("cafe revenues 2022")+
coord_flip()
View(cafe_2020)
View(cafe_2020)
year_sum20 <- cafe_2020 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_20 <- data.frame (first_column  = c("811620.23")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum21 <- cafe_2021 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_21 <- data.frame (first_column  = c("1630942.70")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum22 <- cafe_2022 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_22 <- data.frame (first_column  = c("2656101.62")
) %>%
mutate(first_column = as.numeric(first_column))
yearly_sums <- cbind(sum_20, sum_21, sum_22) %>%
rename("2020" = 1, "2021" = 2, "2022" = 3) %>%
pivot_longer(
cols = starts_with("20"),
names_to = "year",
values_to = "income"
)
ggplot(yearly_sums) +
geom_bar(aes(x = year, weight=income)) +
ggtitle("total revenues acrosss all cafes, by year")
View(year_sum20)
View(cafe_2020)
year_sum20 <- cafe_2020 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_20 <- data.frame (first_column  = c("811620.23")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum21 <- cafe_2021 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_21 <- data.frame (first_column  = c("1630942.70")
) %>%
mutate(first_column = as.numeric(first_column))
year_sum22 <- cafe_2022 %>%
bind_rows(summarise(., across(where(is.numeric), sum),
across(where(is.character), ~'month_total')))
sum_22 <- data.frame (first_column  = c("2656101.62")
) %>%
mutate(first_column = as.numeric(first_column))
yearly_sums <- cbind(sum_20, sum_21, sum_22) %>%
rename("2020" = 1, "2021" = 2, "2022" = 3) %>%
pivot_longer(
cols = starts_with("20"),
names_to = "year",
values_to = "income"
)
ggplot(yearly_sums) +
geom_bar(aes(x = year, weight=income)) +
ggtitle("total sales acrosss all cafes, by year")
View(sum_21)
View(cafe_2021)
View(year_sum21)
View(year_sum22)
View(cafe_2021)
